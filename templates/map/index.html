{% extends "base.html" %}
{% load static %}
{% block title %}KoMAP{% endblock %}

{% block main %}

{% if booth_info %}
  <div class="booth-area">
    <div class="max-w-xl mx-auto">
      <h3>ã‚µãƒ¼ã‚¯ãƒ«ã®ãƒ–ãEã‚¹ã‚’è¦‹ã¦ã¿ã‚ˆã†EE/h3>
    </div>
    {% for booth in booth_info %}
      <div class="booth-info">
        <p>ã‚µãƒ¼ã‚¯ãƒ«:{{ booth.circle_name }}</p>
        <p>ãƒ–ãEã‚¹ã®ã‚ã‚‹å ´æ‰€: {{ booth.room_name }}</p>
        <a href="{{ booth.url }}" class="hidden">url</a>
      </div>
    {% endfor %}
  </div>
{% endif %}
  <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã‚«ãƒ¼ãƒE-->
  <div class="search-card">
    <h3>ç¾åœ¨éšã¨ç›®çšEœ°ã‚’åEåŠ›ã—ã¦ãã ã•ã‚Œã°ã€æ¡ˆåEã‚’é–‹å§‹ã§ãã¾ã™ï¼E/h3>
    <form method="post" class="flex flex-col space-y-4">
      {% csrf_token %}
      {{ form.as_table }}
      <button type="submit" class="btn">Search</button>
    </form>
  </div>
{% endblock %}

{% block extra_js %}
<!-- jQuery ã¨ jQuery UI ã®èª­ã¿è¾¼ã¿ -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>


<script>
  $(function() {
    // boothãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾ã—ã¦ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚’æœ‰åŠ¹åŒE
    $('#id_booth').autocomplete({
      source: "{% url 'map:booth-autocomplete' %}",
      minLength: 1, // 2æ–E­—ä»¥ä¸ŠåEåŠ›ã•ã‚ŒãŸã‚‰å€™è£œã‚’å–å¾E
    });
  });
</script>

<script>
  $(document).ready(function() {
    // ã‚«ãƒ¼ãƒ‰ã«ãƒã‚¦ã‚¹ãŒåEã£ãŸã¨ãã«ã‚¯ãƒ©ã‚¹è¿½åŠ ã€E›¢ã‚ŒãŸã‚‰å‰Šé™¤
    $('.booth-info').on('mouseenter', function() {
      $(this).addClass('hover-glow');
    }).on('mouseleave', function() {
      $(this).removeClass('hover-glow');
    });
    
    // ã‚«ãƒ¼ãƒ‰åEä½“ã‚’ã‚¯ãƒªãƒE‚¯ã—ãŸã¨ãã€åEéƒ¨ã®<a>ã‚¿ã‚°ã®URLã«é·ç§»ã™ã‚‹
    $('.booth-info').on('click', function() {
      var url = $(this).find('a').attr('href');
      if (url) {
        window.location.href = url;
      }
    });
  });
</script>
{% endblock %}