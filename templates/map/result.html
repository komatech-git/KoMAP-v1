<!-- templates/map/result.html -->
{% extends "base.html" %}

{% block title %}Map Results{% endblock %}

{% block main %}
<div class="container mx-auto px-4 py-6">
  <h2 class="text-3xl font-semibold mb-6 text-center">Search Results</h2>
  
  <!-- 検索フォームカード -->
  <div class="search-card">
    <form method="post" class="flex flex-col space-y-4">
      {% csrf_token %}
      {{ form.as_table }}
      <button type="submit" class="btn">Search</button>
    </form>
  </div>
  {% if instructions.intro %}
  <div id="info_card_intro" class="result-card">
      {% for msg in instructions.intro %}
        <p>{{ msg }}</p>
      {% endfor %}
  </div>
  {% endif %}

  {% if instructions.floor_move %}
  <div id="info_card_floormove" class="result-card">

      {% for msg in instructions.floor_move %}
        <p>{{ msg }}</p>
      {% endfor %}    
      {% if long_elevator_url %}
        <div id="long_elevator" class="result-card">
          <img src="{{ long_elevator_url }}" alt="Long Elevator" class="w-full object-cover">
        </div>
      {% endif %}
      
      {% if short_elevator_url %}
        <div id="short_elevator" class="result-card">
          <img src="{{ short_elevator_url }}" alt="Short Elevator" class="w-full object-cover">
        </div>
      {% endif %}
      

  </div>
  {% endif %}

  {% if instructions.room_guide %}
  <div id="info_card_roomguide" class="result-card">

      {% for msg in instructions.room_guide %}
        <p>{{ msg }}</p>
      {% endfor %}
      
      {% if room_image_url %}
      <div id="map_picture" class="result-card">
        <img src="{{ room_image_url }}" alt="Map Overview" class="w-full object-cover">
      </div>
      {% endif %}
  </div>
  {% endif %}
  {% endblock %} 
  

{% block extra_js %}
<!-- jQuery と jQuery UI の読み込み -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

<script>
  $(function() {
    // boothフィールドに対してオートコンプリートを有効匁E
    $('#id_booth').autocomplete({
      source: "{% url 'map:booth-autocomplete' %}",
      minLength: 1,
    });
  });
</script>
{% endblock %}